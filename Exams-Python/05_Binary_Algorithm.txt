Задание 5. Демонстрационное тестирование 2024, никаких гарантий, всё как есть! :)

    На вход алгоритма подается натуральное число N. Алгоритм строит по нему новое число R следующим образом.
        1. Строится двоичная запись числа N.
        2. Далее эта запись обрабатывается по следующими правилами:
            а) если число N делится на 3, то к этой записи дописываются три последние двоичные цифры;
            б) если число N не делится на 3, то остаток от деления умножается на 3, переводится в двоичную запись и дописывается в конец числа.
    Полученная таким образом запись является двоичной записью, искомого числа R.
    3. Результат переводится в десятичную систему счисления и выводится на экран.
    Например, для исходного числа 12 = 1100[2], результатом является число 1100100[2] = 100, а для исходного числа 4 = 100[2], это число 10011[2] = 19.
    Укажите минимальное число R большее 151, которое может быть получено с помощью описанного алгоритма. В ответе запишите это число в десятичной системе счисления.

    Решение карандашом удобней, т.к. правила достаточно простые и все числа в пределах 8-ми бит.
    Сначала проанализируем общие допустимые пределы вычислений насколько это возможно. Алгоритм только исполняет арифметическое смещение влево на 2 или 3 бита, в зависимости от условий, следовательно диапазоны итоговых чисел относительно условия могут быть (128, 256). Для смещения в 3 бита это 16 и 32 для 2-ух бит. Верхний предел 256, или 2 в 8-ой степени. Значит перебирать есть смысл до 64 при смещении 2-ух бит и до 32 при смещении 3-ех бит. Т.е. перебор можно предположительно реализовать от 16 до 64 включительно.  
    Дальше решать может быть удобней от обратного, от результата. По условию минимальный ответ удовлетворяющий условию 152, двоичное представление 10011000. Перебираем шаги алгоритма в обратном порядке и ищем первый параметр, с которым не будет противоречий по 
правилам задания. Дополнительно всмпомнить критерий делимости на 3.
    152 - последние 3 бита равны 0 первое правило не применимо, т.к. биты не равны [000] и [011]. Второе правило иcключаем, т.к. возможно только окончание на 3 * 1 [11] или 3 * 2 [110]. Исключаем этот вариант.
    10011[011] - первое число подходящее под второе правило, но не под первое т.к. 19 на три не делится. Если остаток от деления 100110(38) mod 3 = 2, то последние три бита должны быть 3 * 2 = 6[110], не совпадает с [011]. Аналогично 10011[110] - только второе 
правило, т.к. 19 не делится 3, остаток от деления 1, следовательно добавленные биты должны быть 3 * 1 = 3[011] а не [110] как в числе, оба варианта 155 и 158 исключаем.
    Далее подобным образом движемся по числам, подставляя только эти три комбинации по возрастанию. 159 - делится на три, но сразу видно что биты [011] и [111] не совпадают. Или 100111 - следующая комбинация (+1) относительно предыдущей, 10011, с учетом остатка, 100111[11] - уже проверили, 159.
    Следующий 20(10100) остаток от деления 2, следовательно только второе правило, 10100[110] - 166, подходит и откладываем это число, возможно оно и есть результат, но т.к. у нас еще есть биты меньше [110] то посмотрим еще.
    Чтобы результат алгоритма был меньше, необходимо чтобы она оканчивалась менее [110]. Для первого правила это невозможно, т.к. [100] в первой части уже меньше результат не даст, [101] и [101] при 21 исходной левой части. Следовательно остается только [011] - а это возможно только при остатке от деления 1 и следующем 101000(40), итоговое число 101000[11] и это 163. Т.к. при дальнейшем росте чисел и комбинаций результат алгоритма меньше не возможен, то анализ можно завершить.

Вспомогательная таблица для аналитического решения,
R:      Rb:             N:      N1b:    N2b:
152     10011000        не является числом подходящим под правила.
153     10011001        не является числом подходящим под правила.
154     10011010        не является числом подходящим под правила.
155     10011011        38      100110  011     остаток от деления на 1.
156     10011100        не является числом подходящим под правила.
157     10011101        не является числом подходящим под правила.
158     10011110        19      10011   110     остаток от деления на 2.
159     10011111        не является числом подходящим под правила.
160     10100000        не является числом подходящим под правила.
161     10100001        не является числом подходящим под правила.
162     10100010        не является числом подходящим под правила.
163     10100011        40      101000  011     остаток от деления на 1.
164     10100100        не является числом подходящим под правила.
165     10100101        не является числом подходящим под правила.
166     10100110        20      10100   110     остаток от деления на 2.
167     10100111        не является числом подходящим под правила.
168     10101000        21      10101   000     делится на 3 без остатка.
169     10101001        21      10101   001     делится на 3 без остатка.
170     10101010        21      10101   010     делится на 3 без остатка.


Примеры битовых операторов по аналогии с командами процессора:
A1:             And:            A3:             Or:             A5:             SHL3:           SHR3:
11111111        11000011        11000011        00011000        11011011        11011011000     00011011
11111111        00111100        00111100        10000001        10111101        10111101000     00010111

В данном пример объединения старших разрядов нет, но если есть, то не забыть функции "bit_length" и "bit_count".
Пример число 0xAB[10101011], длина в битах 8 и количество единиц 5.

Решение прямым перебором с применением смещения, маски и объединения бит.
Число N и его двоичная форма, маска, число R и его первая часть 5-6 бит о ставшаяся часть 2-3 бита, минимальное значение R и тип правила.
N:      Nb:     Mask:   R:      R1b:    R2b:    Rmin:   Type:
16      010000  011     67      010000  011     256     второе правило, число делится на 3 с остатком.
17      010001  111     142     010001  110     256     второе правило, число делится на 3 с остатком.
18      010010  111     146     010010  010     256     первое правило, число делится на 3 без остатка.
19      010011  011     79      010011  011     256     второе правило, число делится на 3 с остатком.
20      010100  111     166     010100  110     256     второе правило, число делится на 3 с остатком.
21      010101  111     173     010101  101     166     первое правило, число делится на 3 без остатка.
22      010110  011     91      010110  011     166     второе правило, число делится на 3 с остатком.
23      010111  111     190     010111  110     166     второе правило, число делится на 3 с остатком.
24      011000  111     192     011000  000     166     первое правило, число делится на 3 без остатка.
25      011001  011     103     011001  011     166     второе правило, число делится на 3 с остатком.
26      011010  111     214     011010  110     166     второе правило, число делится на 3 с остатком.
27      011011  111     219     011011  011     166     первое правило, число делится на 3 без остатка.
28      011100  011     115     011100  011     166     второе правило, число делится на 3 с остатком.
29      011101  111     238     011101  110     166     второе правило, число делится на 3 с остатком.
30      011110  111     246     011110  110     166     первое правило, число делится на 3 без остатка.
31      011111  011     127     011111  011     166     второе правило, число делится на 3 с остатком.
32      100000  111     262     100000  110     166     второе правило, число делится на 3 с остатком.
33      100001  111     265     100001  001     166     первое правило, число делится на 3 без остатка.
34      100010  011     139     100010  011     166     второе правило, число делится на 3 с остатком.
35      100011  111     286     100011  110     166     второе правило, число делится на 3 с остатком.
36      100100  111     292     100100  100     166     первое правило, число делится на 3 без остатка.
37      100101  011     151     100101  011     166     второе правило, число делится на 3 с остатком.
38      100110  111     310     100110  110     166     второе правило, число делится на 3 с остатком.
39      100111  111     319     100111  111     166     первое правило, число делится на 3 без остатка.
40      101000  011     163     101000  011     166     второе правило, число делится на 3 с остатком.
41      101001  111     334     101001  110     163     второе правило, число делится на 3 с остатком.
42      101010  111     338     101010  010     163     первое правило, число делится на 3 без остатка.
43      101011  011     175     101011  011     163     второе правило, число делится на 3 с остатком.
44      101100  111     358     101100  110     163     второе правило, число делится на 3 с остатком.
45      101101  111     365     101101  101     163     первое правило, число делится на 3 без остатка.
46      101110  011     187     101110  011     163     второе правило, число делится на 3 с остатком.
47      101111  111     382     101111  110     163     второе правило, число делится на 3 с остатком.
48      110000  111     384     110000  000     163     первое правило, число делится на 3 без остатка.
49      110001  011     199     110001  011     163     второе правило, число делится на 3 с остатком.
50      110010  111     406     110010  110     163     второе правило, число делится на 3 с остатком.
51      110011  111     411     110011  011     163     первое правило, число делится на 3 без остатка.
52      110100  011     211     110100  011     163     второе правило, число делится на 3 с остатком.
53      110101  111     430     110101  110     163     второе правило, число делится на 3 с остатком.
54      110110  111     438     110110  110     163     первое правило, число делится на 3 без остатка.
55      110111  011     223     110111  011     163     второе правило, число делится на 3 с остатком.
56      111000  111     454     111000  110     163     второе правило, число делится на 3 с остатком.
57      111001  111     457     111001  001     163     первое правило, число делится на 3 без остатка.
58      111010  011     235     111010  011     163     второе правило, число делится на 3 с остатком.
59      111011  111     478     111011  110     163     второе правило, число делится на 3 с остатком.
60      111100  111     484     111100  100     163     первое правило, число делится на 3 без остатка.
61      111101  011     247     111101  011     163     второе правило, число делится на 3 с остатком.
62      111110  111     502     111110  110     163     второе правило, число делится на 3 с остатком.
63      111111  111     511     111111  111     163     первое правило, число делится на 3 без остатка.

Результат прямого перебора, минимальное значение R = 163.


Решение обратным перебором с проверкой правил и выводом первого корректного.
Решение может быть неопределенным, по правилам и получаемому значению, но в этом случае сработает. Параметры таблицы аналогичны предыдущим параметрам: N, R и его части.
R:      Rb:             R1b:    R2b:    N:      Type:
152     10011000                                не подходит под оба правила.
153     10011001                                не подходит под оба правила.
154     10011010                                не подходит под оба правила.
155     10011011        100110  011     38      младшая часть равна 1, различается с остатком деления (38 mod 3) * 3 = 3.
156     10011100                                не подходит под оба правила.
157     10011101                                не подходит под оба правила.
158     10011110        10011   110     19      младшая часть равна 2, различается с остатком деления (19 mod 3) * 3 = 6.
159     10011111        100111  011     39      младшая часть равна 1, различается с остатком деления (39 mod 3) * 3 = 3.
160     10100000                                не подходит под оба правила.
161     10100001                                не подходит под оба правила.
162     10100010                                не подходит под оба правила.
163     10100011        1010001 001     81      младшая часть равна 0, совпадает с остатком деления (81 mod 3) * 3 = 0, корректно.

Результат работы обратного перебора R = 163.
